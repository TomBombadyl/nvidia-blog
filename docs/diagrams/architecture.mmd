graph TB
    subgraph ExternalSources["External Sources"]
        RSS1["NVIDIA Developer Blog RSS"]
        RSS2["NVIDIA Official Blog RSS"]
    end
    
    subgraph IngestionPipeline["Ingestion Pipeline - Cloud Run Job"]
        RF["RSS Fetcher<br/>rss_fetcher.py"]
        HC["HTML Cleaner<br/>html_cleaner.py"]
        GS["GCS Storage<br/>gcs_utils.py"]
        RI["RAG Ingester<br/>rag_ingest.py"]
        VS["Vector Search Ingester<br/>vector_search_ingest.py"]
    end
    
    subgraph GCS["Google Cloud Storage"]
        GCSBucket[("GCS Bucket<br/>nvidia-blogs-raw")]
    end
    
    subgraph VertexAI["Vertex AI Services"]
        RC["RAG Corpus<br/>europe-west3"]
        VSE["Vector Search Endpoint<br/>europe-west3"]
        GM["Gemini 2.0 Flash<br/>europe-west4"]
    end
    
    subgraph MCPServer["MCP Server - Cloud Run Service"]
        MS["MCP Server<br/>FastMCP"]
        QT["Query Transformer<br/>rag_query_transformer.py"]
        QE["Query Engine<br/>query_rag.py"]
        AG["Answer Grader<br/>rag_answer_grader.py"]
    end
    
    subgraph Clients["Clients"]
        CURSOR["Cursor IDE"]
        OTHER["Other MCP Clients"]
    end
    
    RSS1 --> RF
    RSS2 --> RF
    RF --> HC
    HC --> GS
    GS --> GCSBucket
    GS --> RI
    GS --> VS
    RI --> RC
    VS --> VSE
    
    CURSOR --> MS
    OTHER --> MS
    MS --> QT
    QT --> GM
    QT --> QE
    QE --> RC
    QE --> VSE
    QE --> AG
    AG --> GM

    style ExternalSources fill:#e1f5ff
    style IngestionPipeline fill:#fff4e1
    style GCS fill:#e8f5e9
    style VertexAI fill:#f3e5f5
    style MCPServer fill:#fff9c4
    style Clients fill:#fce4ec

